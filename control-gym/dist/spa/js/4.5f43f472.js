(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"3e7e":function(e,t,s){"use strict";s("b0e9")},"74db":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-layout",{staticClass:"flex flex-start row",attrs:{id:"fondo-login",view:"lHh Lpr lFf"}},[s("div",{staticClass:"items-center column col-6 q-mt-lg  q-ml-xl"},[s("div",[s("img",{staticStyle:{width:"18vw"},attrs:{src:"/logo-text.png"}})]),s("q-card",{staticClass:"column q-mt-md  card-loig",staticStyle:{width:"400px"}},[s("q-card-section",{staticClass:"column  q-gutter-md q-mt-xs"},[s("div",[s("q-input",{staticStyle:{border:"1px solid #ea0133"},attrs:{borderless:"",dark:"",type:"email",color:"white",label:"Email"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Login()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-ml-xs",attrs:{name:"person",size:"md",color:"white"}})]},proxy:!0}]),model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),s("div",[s("q-input",{staticStyle:{border:"1px solid #ea0133"},attrs:{borderless:"",dark:"",type:e.isPwd?"password":"text",color:"white",label:"Contraseña"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.Login()}},scopedSlots:e._u([{key:"prepend",fn:function(){return[s("q-icon",{staticClass:"q-ml-xs",attrs:{name:"vpn_key",size:"md",color:"white"}})]},proxy:!0},{key:"append",fn:function(){return[s("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),s("q-card-actions",{staticClass:"q-mb-md q-mt-lg ",attrs:{align:"center"}},[s("q-btn",{staticStyle:{width:"40%"},attrs:{id:"btn",loading:e.loading},on:{click:e.Login}},[s("div",{staticClass:"text-center text-weight-bolder"},[e._v("\n            ENTRAR\n          ")])])],1)],1)],1),s("q-page-container",[s("router-view")],1)],1)},i=[],o=(s("e6cf"),s("ded3")),n=s.n(o),r=s("2f62"),l={name:"Login",data(){return{loading:!1,email:null,password:null,isPwd:!0}},computed:n()({},Object(r["d"])("example",["user"])),methods:n()(n()(n()({},Object(r["c"])("example",["token","setUser"])),Object(r["b"])("example",["getUser"])),{},{async Login(){this.loading=!0;const e={email:this.email,password:this.password},t=this.$axios.post("usuarios/login?",e);t.catch((e=>{this.loading=!1,this.$q.notify({message:"Esta cuenta no existe, o verifica tu conexión",type:"negative"})})),t.then((e=>{this.token(e),this.getUser(e.userId).then((async t=>{this.$q.sessionStorage.set("userData",t),this.$q.sessionStorage.set("user",e),this.setUser(t),this.$router.push("/dashboard"),this.saludo(t)}))}))},saludo(e){var t,s=new Date,a=s.getHours(),i="";a>=0&&a<12&&(i="Buenos Días",t="wb_sunny"),a>=12&&a<18&&(i="Buenas Tardes",t="brightness_4"),a>=18&&a<24&&(i="Buenas Noches",t="nightlight"),this.$q.notify({message:i+" "+e.first_name+" "+e.last_name,color:"positive",icon:t,position:"bottom-left"})},async New(){this.$q.dialog({title:"Enviar contraseña por correo",message:"Por favor escriba su email",prompt:{model:"",type:"email",isValid:e=>e.length>0},cancel:!0,persistent:!0}).onOk((async e=>{var t={where:{role:"user",email:e}},s=await this.$axios.get("usuarios?filter="+JSON.stringify(t));s.length?this.$axios.post("request-password-reset?email="+e,{email:e}).then((e=>{this.$q.dialog({title:"Clave enviada",message:"Revise su email y siga las instrucciones"})})):this.$q.dialog({title:"ERROR ENCONTRADO :(",message:'<span class="text-weight-bold text-grey-8">Según el email ingresado no se encuentra usuario con el mismo. Por favor ingrese la dirección de correo que le haya sido creada o cargada. En caso de no saberla comuniquese con su</span> <strong>ADMINISTRADOR</strong>',html:!0})})).onCancel((()=>{})).onDismiss((()=>{}))}}),mounted(){"/login"==this.$route.path&&this.$q.sessionStorage.has("userData")&&(this.$q.sessionStorage.remove("userData"),this.$q.sessionStorage.remove("user"),close||window.location.reload(!1))}},c=l,d=(s("3e7e"),s("2877")),u=s("4d5a"),m=s("f09f"),p=s("a370"),g=s("27f9"),h=s("0016"),y=s("4b7e"),f=s("9c40"),w=s("09e3"),b=s("eebe"),q=s.n(b),x=Object(d["a"])(c,a,i,!1,null,null,null);t["default"]=x.exports;q()(x,"components",{QLayout:u["a"],QCard:m["a"],QCardSection:p["a"],QInput:g["a"],QIcon:h["a"],QCardActions:y["a"],QBtn:f["a"],QPageContainer:w["a"]})},b0e9:function(e,t,s){}}]);