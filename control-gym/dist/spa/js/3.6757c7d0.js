(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"37c8":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{attrs:{id:"fondo"}},[i("div",{staticClass:"float-right q-pt-md q-pr-md"},[i("q-btn",{attrs:{color:"white",flat:"",round:"",icon:"fas fa-ellipsis-v"}},[i("q-menu",[i("q-list",{staticStyle:{"min-width":"100px"}},[i("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{clickable:""},on:{click:function(e){return t.logout()}}},[i("q-item-section",[t._v("Cerrar Sesión")])],1)],1)],1)],1)],1),i("div",{staticClass:"q-pa-md"},[t.crear?t._e():i("div",{staticClass:"row q-gutter-sm justify-center items-end"},[i("div",[i("img",{attrs:{src:a("79ba"),width:"200px"}})]),i("div",{staticClass:"q-pa-md text-h3 text-white text-weight-bolder"},[t._v("\n\t\t  \t\tPANEL DE CONTROL GENERAL\n\t\t  \t")])]),t.dashboard?i("q-card",{staticClass:"q-mt-md q-mx-xl transparent"},[i("q-btn-group",{attrs:{spread:"",id:"btns"}},[i("q-btn",{staticStyle:{height:"70px"},attrs:{push:""},on:{click:function(e){return t.panel("dashboard")}}},[i("q-icon",{attrs:{left:"",size:"3em",name:"dashboard"}}),i("div",{staticClass:"text-weight-bolder text-h6"},[t._v("Dashboard")])],1),i("q-btn",{staticStyle:{height:"70px"},attrs:{push:""},on:{click:function(e){return t.panel("control")}}},[i("q-icon",{attrs:{left:"",size:"3em",name:"supervisor_account"}}),i("div",{staticClass:"text-weight-bolder text-h6"},[t._v("Control")])],1)],1),i("q-card-section",[i("div",{staticClass:"text-h4 text-center text-white text-weight-bold q-pa-md"},[t._v("CONDOMINIOS ACTUALES")]),i("div",{staticClass:"q-pa-md row justify-star q-gutter-xl text-weight-bold"},t._l(t.data,(function(e){return i("q-card",{key:e.name,staticClass:"col-md-3 col-xs-12",attrs:{bordered:"",id:"card"}},[i("q-card-section",{staticClass:"row q-gutter-sm items-end"},[i("div",[i("img",{attrs:{src:a("98ef"),width:"50px"}})]),i("div",{staticClass:"text-h6"},[t._v(t._s(e.name))])]),i("q-separator",{attrs:{inset:"",dark:""}}),i("q-card-section",[i("div",[t._v("\n\t\t\t        \tAdministrador: "+t._s(e.email)+"\n\t\t\t        ")]),i("div",[t._v("\n\t\t\t        \tN° Casas: "+t._s(0)+"\n\t\t\t        ")]),i("div",[t._v("\n\t\t\t        \tEstatus: "+t._s(e.active?"Activo":"Inactivo")+"  \n\t\t\t        \t"),i("q-icon",{attrs:{name:e.active?"check_circle":"cancel",color:e.active?"light-green-13":"negative",size:"sm"}})],1)])],1)})),1)])],1):t._e(),t.control?i("q-card",{staticClass:"q-mt-md q-mx-xl transparent"},[i("q-btn-group",{attrs:{spread:"",id:"btns"}},[i("q-btn",{staticStyle:{height:"70px"},attrs:{push:""},on:{click:function(e){return t.panel("dashboard")}}},[i("q-icon",{attrs:{left:"",size:"3em",name:"dashboard"}}),i("div",{staticClass:"text-weight-bolder text-h6"},[t._v("Dashboard")])],1),i("q-btn",{staticStyle:{height:"70px"},attrs:{push:""},on:{click:function(e){return t.panel("control")}}},[i("q-icon",{attrs:{left:"",size:"3em",name:"supervisor_account"}}),i("div",{staticClass:"text-weight-bolder text-h6"},[t._v("Control")])],1)],1),i("div",{staticClass:"text-h4 text-center text-white text-weight-bold q-pa-md"},[t._v("ADMINISTRACIÓN DE CONDOMINIOS")]),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"q-mb-md"},[i("q-btn",{attrs:{flat:"",color:"white","icon-right":"add",label:"Crear Condominio"},on:{click:function(e){return t.panel("crear")}}})],1),i("q-table",{attrs:{id:"tabla",title:"Condominios",data:t.data,columns:t.columns,filter:t.filter,"row-key":"name"},scopedSlots:t._u([{key:"top-right",fn:function(){return[i("q-input",{attrs:{dark:"",borderless:"",dense:"",debounce:"300",placeholder:"Buscar"},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},[i("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1)]},proxy:!0},{key:"body",fn:function(e){return[i("q-tr",{attrs:{props:e}},[i("q-td",{key:"name",attrs:{props:e}},[t._v("\n\t\t\t\t            "+t._s(e.row.name)+"\n\t\t\t\t          ")]),i("q-td",{key:"email",attrs:{props:e}},[t._v("\n\t\t\t\t            "+t._s(e.row.email)+"\n\t\t\t\t          ")]),i("q-td",{key:"active",attrs:{props:e}},[t._v("\n\t\t\t\t            "+t._s(e.row.active?"Activo":"Inactivo")+"\n\t\t\t\t          ")]),i("q-td",{key:"actions",attrs:{props:e}},[i("q-btn",{attrs:{color:"white",round:"",icon:"edit",flat:""},on:{click:function(a){return t.editar(e.row.id)}}},[i("q-tooltip",{attrs:{"content-class":"color-orange"}},[t._v("Editar")])],1),i("q-btn",{attrs:{color:"white",round:"",icon:"delete",flat:""},on:{click:function(a){return t.eliminar(e.row.id)}}},[i("q-tooltip",{attrs:{"content-class":"color-orange"}},[t._v("Eliminar")])],1),i("q-btn",{attrs:{color:"white",round:"",loading:t.loading_estatus,icon:e.row.active?"block":"check_circle_outline",flat:""},on:{click:function(a){t.changedStatus(e.row.id,!e.row.active)}}},[i("q-tooltip",{attrs:{"content-class":"color-orange"}},[t._v(t._s(e.row.active?"Bloquear":"Activar"))])],1)],1)],1)]}}],null,!1,3574441109)})],1)],1):t._e(),t.crear?i("q-card",{staticClass:"q-mt-md q-mx-xl transparent"},[i("div",{staticClass:"q-pt-md q-ml-md"},[i("q-btn",{attrs:{flat:"",color:"white",icon:"reply",label:"Volver"},on:{click:function(e){t.form={},t.panel("control")}}})],1),i("div",{staticClass:"row items-center"},[i("div",{staticClass:"q-pa-xl colum"},[i("div",{staticClass:"text-weight-bolder text-white text-h4"},[t._v("\n\t\t        \t\tDatos del condominio\n\t\t        \t")]),i("div",{staticClass:"text-center",attrs:{id:"input",align:"center"}},[i("q-input",{ref:"name",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Nombre del  condominio"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("div",{attrs:{id:"input"}},[i("q-input",{ref:"first_name",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Nombre del Administrador"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},model:{value:t.form.first_name,callback:function(e){t.$set(t.form,"first_name",e)},expression:"form.first_name"}})],1),i("div",{attrs:{id:"input"}},[i("q-input",{ref:"last_name",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Apellido del Administrador"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},model:{value:t.form.last_name,callback:function(e){t.$set(t.form,"last_name",e)},expression:"form.last_name"}})],1),i("div",{attrs:{id:"input"}},[i("q-input",{ref:"email",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Correo",type:"email"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),t.form.id?t._e():i("div",{attrs:{id:"input"}},[i("q-input",{ref:"password",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Contraseña",type:t.isPwd?"password":"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!1,3635466494),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),t.form.id?i("div",[i("q-btn",{staticClass:"q-my-md",attrs:{label:"Cambiar Contraseña",color:"white",outline:""},on:{click:function(e){t.prompt=!0}}}),i("q-dialog",{attrs:{persistent:""},model:{value:t.prompt,callback:function(e){t.prompt=e},expression:"prompt"}},[i("q-card",{staticClass:"transparent",staticStyle:{"min-width":"350px"}},[i("q-card-section",[i("div",{staticClass:"text-h6 text-white"},[t._v("Nueva Contraseña")])]),i("q-card-section",{staticClass:"q-pt-none"},[i("q-input",{ref:"password",attrs:{dark:"",rules:[function(t){return!!t||"campo requerido"}],color:"white",label:"Contraseña",type:t.isPwd?"password":"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save()}},scopedSlots:t._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:t.isPwd?"visibility_off":"visibility"},on:{click:function(e){t.isPwd=!t.isPwd}}})]},proxy:!0}],null,!1,3635466494),model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"color-orange text-white",attrs:{label:"Cancelar"},on:{click:function(e){t.form.password=null}}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"color-orange text-white",attrs:{label:"Cambiar"},on:{click:function(e){return t.save()}}})],1)],1)],1)],1):t._e(),i("q-btn",{staticClass:"q-my-md color-orange",attrs:{id:"input",loading:t.loading},on:{click:function(e){return t.save()}}},[i("div",{staticClass:"text-center text-weight-bolder text-white"},[t._v("\n\t\t                Crear\n\t\t              ")])])],1),i("div",[i("img",{staticStyle:{width:"20vw"},attrs:{src:a("cf05")}})])])]):t._e()],1)])},s=[],o=(a("e6cf"),a("ded3")),r=a.n(o),n={name:"PageIndex",data(){return{dashboard:!0,control:!1,crear:!1,filter:null,loading:!1,form:{},isPwd:!0,data:[],prompt:!1,loading_estatus:!1,columns:[{name:"name",required:!0,label:"Condominios",align:"left",field:t=>t.name,format:t=>`${t}`,sortable:!0},{name:"email",align:"center",label:"Usuario Administrador",field:"email",sortable:!0},{name:"active",align:"right",label:"Estado",field:"active",sortable:!0},{name:"actions",align:"right",label:"Acciones",sortable:!0}]}},methods:{panel(t){"dashboard"==t&&(this.dashboard=!0,this.control=!1,this.crear=!1),"control"==t&&(this.control=!0,this.dashboard=!1,this.crear=!1),"crear"==t&&(this.crear=!0,this.control=!1,this.dashboard=!1,this.$q.notify({icon:"announcement",message:"Recuerda, todos los campos son necesarios",color:"positive"}))},async save(){if(this.loading=!0,this.form.id){if(this.form.password){if(!this.$refs.name.validate()||!this.$refs.first_name.validate()||!this.$refs.last_name.validate()||!this.$refs.email.validate()||!this.$refs.password.validate())return this.loading=!1,this.$q.notify({message:"Campo requerido",color:"negative"})}else if(!this.$refs.name.validate()||!this.$refs.first_name.validate()||!this.$refs.last_name.validate()||!this.$refs.email.validate())return this.loading=!1,this.$q.notify({message:"Campo requerido",color:"negative"});if(!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.form.email))return this.loading=!1,this.$q.notify({message:"La dirección de correo no es valida",color:"negative"});e=!1;if(this.form.password&&this.form.password.length>=8){for(a=!1,i=!1,s=!1,o=!1,n=0;n<this.form.password.length;n++)this.form.password.charCodeAt(n)>=65&&this.form.password.charCodeAt(n)<=90?a=!0:this.form.password.charCodeAt(n)>=97&&this.form.password.charCodeAt(n)<=122?i=!0:this.form.password.charCodeAt(n)>=48&&this.form.password.charCodeAt(n)<=57?s=!0:o=!0;1==a&&1==i&&1==o&&1==s&&(e=!0)}if(this.form.password&&!e)return this.loading=!1,this.$q.notify({message:"La Contraseña debe de tener: Mayusculas, Minusculas, caracter especial y numeros",color:"negative"});try{var t;l=await this.$axios.patch("condominios/"+this.form.id,{name:this.form.name,email:this.form.email,active:!0});t=this.form.password?this.$axios.patch("usuarios/"+this.form.admin,{first_name:this.form.first_name,last_name:this.form.last_name,email:this.form.email,password:this.form.password}):this.$axios.patch("usuarios/"+this.form.admin,{first_name:this.form.first_name,last_name:this.form.last_name,email:this.form.email}),t.then((async t=>{await this.getList(),this.loading=!1,this.$q.notify({message:"Condominio actualizado",color:"positive"})}))}catch(c){this.loading=!1,this.$q.notify({message:"Ups hubo un error",color:"negative"})}}else{if(!this.$refs.name.validate()||!this.$refs.first_name.validate()||!this.$refs.last_name.validate()||!this.$refs.email.validate()||!this.$refs.password.validate())return this.loading=!1,this.$q.notify({message:"Campo requerido",color:"negative"});if(!/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i.test(this.form.email))return this.loading=!1,this.$q.notify({message:"La dirección de correo no es valida",color:"negative"});var e=!1;if(this.form.password.length>=8){for(var a=!1,i=!1,s=!1,o=!1,n=0;n<this.form.password.length;n++)this.form.password.charCodeAt(n)>=65&&this.form.password.charCodeAt(n)<=90?a=!0:this.form.password.charCodeAt(n)>=97&&this.form.password.charCodeAt(n)<=122?i=!0:this.form.password.charCodeAt(n)>=48&&this.form.password.charCodeAt(n)<=57?s=!0:o=!0;1==a&&1==i&&1==o&&1==s&&(e=!0)}if(!e)return this.loading=!1,this.$q.notify({message:"La Contraseña debe de tener: Mayusculas, Minusculas, caracter especial y numeros",color:"negative"});try{var l=await this.$axios.post("condominios",{name:this.form.name,email:this.form.email,active:!0});await this.$axios.post("usuarios",{first_name:this.form.first_name,last_name:this.form.last_name,email:this.form.email,password:this.form.password,condominium:l.id,role:"admin"}).then((async t=>{await this.$axios.put("condominios/"+l.id,r()(r()({},l),{},{admin:t.id,condominium:l.id})),await this.getList(),this.loading=!1,this.panel("control"),this.$q.notify({message:"Condominio creado!",color:"positive"})}))}catch(c){this.loading=!1,this.$q.notify({message:"Ups hubo un error",color:"negative"})}}},getList(){this.$q.loading.show(),this.$axios.get("condominios").then((t=>{this.data=t,this.$q.loading.hide()})).catch((t=>{this.$q.loading.hide()}))},async editar(t){this.$axios.get("condominios/"+t).then((async t=>{this.$axios.get("usuarios/"+t.admin).then((e=>{this.form=r()(r()({},e),t),this.crear=!0,this.control=!1,this.dashboard=!1})).catch((t=>{this.$q.notify({message:"Ups hubo un error",color:"negative"})}))})).catch((t=>{this.$q.notify({message:"Ups hubo un error",color:"negative"})}))},eliminar(t){this.$q.dialog({title:"Eliminar",message:"¿Segúro que quiere eliminar este condominio?",cancel:"Cancelar",persistent:!0}).onOk((async()=>{this.$q.loading.show(),await this.$axios.delete("condominios/"+t).then((t=>{this.$q.notify({message:"condominio elimnado",color:"positive"}),this.$q.loading.hide(),this.getList()})).catch((t=>{this.$q.notify({message:"Ups hubo un error",color:"negative"}),this.$q.loading.hide()}))})).onCancel((()=>{}))},changedStatus(t,e){this.loading_estatus=!0,this.$q.dialog({title:"Cambiar Estatus",message:"¿Segúro que quiere "+(e?"Activar":"Bloquear")+" este condominio?",cancel:"Cancelar",persistent:!0}).onOk((async()=>{await this.$axios.patch("condominios/"+t,{active:e}).then((t=>{this.$q.notify({message:"Estatus Modificado",color:"positive"}),this.loading_estatus=!1,this.getList()})).catch((t=>{this.$q.notify({message:"Ups hubo un error",color:"negative"}),this.loading_estatus=!1}))})).onCancel((()=>{this.loading_estatus=!1}))},async logout(){this.$q.sessionStorage.remove("userData"),this.$q.sessionStorage.remove("user"),this.$router.push("/login"),close||window.location.reload(!1)}},async mounted(){await this.getList()}},l=n,c=(a("cd04"),a("2877")),d=a("9989"),m=a("9c40"),h=a("4e73"),u=a("1c1c"),p=a("66e5"),f=a("4074"),v=a("f09f"),g=a("e7a9"),q=a("0016"),w=a("a370"),b=a("eb85"),y=a("eaac"),C=a("27f9"),_=a("bd08"),x=a("db86"),k=a("05c0"),$=a("24e8"),A=a("4b7e"),S=a("7f67"),E=a("eebe"),Q=a.n(E),O=Object(c["a"])(l,i,s,!1,null,null,null);e["default"]=O.exports;Q()(O,"components",{QPage:d["a"],QBtn:m["a"],QMenu:h["a"],QList:u["a"],QItem:p["a"],QItemSection:f["a"],QCard:v["a"],QBtnGroup:g["a"],QIcon:q["a"],QCardSection:w["a"],QSeparator:b["a"],QTable:y["a"],QInput:C["a"],QTr:_["a"],QTd:x["a"],QTooltip:k["a"],QDialog:$["a"],QCardActions:A["a"]}),Q()(O,"directives",{ClosePopup:S["a"]})},"79ba":function(t,e,a){t.exports=a.p+"img/isotipo.b2402eab.png"},"7ea5":function(t,e,a){},"98ef":function(t,e,a){t.exports=a.p+"img/isotipo_white.6bcfa7a7.png"},cd04:function(t,e,a){"use strict";a("7ea5")},cf05:function(t,e,a){t.exports=a.p+"img/logo.5634c57a.png"}}]);